{% extends "base.html" %}

{% block title %}Lab Details - Lab Management{% endblock %}

{% block breadcrumb %}
<a href="/" class="breadcrumb-item">Home</a>
<span class="breadcrumb-separator">/</span>
<span class="breadcrumb-item active">{{ lab_name }}</span>
{% endblock %}

{% block content %}
<div class="lab-details-header">
    <h2>{{ lab_name }}</h2>
    <p class="subtitle">Time Slots & Assigned Riders</p>
</div>

<div class="time-slots-container">
    {% if time_slots %}
        {% for slot in time_slots %}
        <div class="time-slot-card" onclick="navigateToRider('{{ lab_name }}', '{{ slot.rider_name }}', '{{ slot.time_slot }}')">
            <div class="slot-header">
                <span class="time-slot-badge">⏰ {{ slot.time_slot }}</span>
                <span class="status-badge {% if slot.status == 'Active' %}status-active{% else %}status-inactive{% endif %}">
                    {{ slot.status }}
                </span>
            </div>
            
            <div class="slot-details">
                <div class="detail-row">
                    <label>Rider:</label>
                    <span class="rider-name">{{ slot.rider_name }}</span>
                </div>
                <div class="detail-row">
                    <label>Test Type:</label>
                    <span>{{ slot.test_type }}</span>
                </div>
                <div class="detail-row">
                    <label>Fuel Type:</label>
                    <span>{{ slot.fuel_type }}</span>
                </div>
                <div class="detail-row">
                    <label>Vehicle Class:</label>
                    <span>{{ slot.vehicle_class }}</span>
                </div>
            </div>
            
            <div class="slot-footer">
                <span class="click-indicator">Click to edit details →</span>
            </div>
        </div>
        {% endfor %}
    {% else %}
    <div class="no-data">
        <p>No time slots found for this lab.</p>
    </div>
    {% endif %}
</div>

<div class="back-button">
    <button onclick="window.history.back()" class="btn btn-secondary">← Back</button>
</div>
{% endblock %}

{% block scripts %}
<script>
function navigateToRider(labName, riderName, timeSlot) {
    window.location.href = `/rider/${encodeURIComponent(labName)}/${encodeURIComponent(riderName)}/${encodeURIComponent(timeSlot)}`;
}
</script>
{% endblock %}
